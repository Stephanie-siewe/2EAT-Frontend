<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="white" mode="md" icon="chevron-back-outline" ></ion-back-button>
    </ion-buttons>
    <ion-icon slot="end" name="star-outline"  id="star-outline"></ion-icon>
    </ion-toolbar>
</ion-header>

<!-- modal controller pour le rating -->
<ion-modal #modal trigger="star-outline">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Notez ce lieu</ion-title>
        <ion-button expand="block" fill="clear" shape="round"  slot="end" (click)="modal.dismiss" >
          Close
        </ion-button>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <!-- <ion-toolbar>
        <ion-title>Notez ce lieu</ion-title>
        <ion-button expand="block" fill="clear" shape="round"  slot="end" >
          Close
        </ion-button>
      </ion-toolbar> -->
      <ion-grid>
        <ion-row justify-content-center>
          <ion-col size="auto" *ngFor="let star of stars" (click)="selectRating(star)">
            <ion-icon [name]="star" class="star-icon" [color]="isSelected(star) ? 'warning' : 'medium'"></ion-icon>
          </ion-col>
        </ion-row>
    
    
    
      </ion-grid>
    
      <ion-button expand="full" (click)="submitRating()" color="blue" >Envoyer</ion-button>
    </ion-content>
    
    </ng-template>
    </ion-modal>

<ion-content fullscreen="true">
  <div class="img-box" >
    <div class="back">
      
      <ion-img [src]="'data:image/jpeg;base64,'+ place.picture"></ion-img>      
  </div>
  
  <div class="container" >
          <h2>{{place.name}}</h2>
          <div class="chip">
            <ion-icon name="star" color="warning"></ion-icon>
            <ion-icon name="star" color="warning"></ion-icon>
            <ion-icon name="star" color="warning"></ion-icon>
            <ion-icon name="star" color="warning"></ion-icon>
            <ion-label color="white">{{note}}</ion-label>
          </div>       
          <h3>{{place.localisation.quarter}},{{place.localisation.city}}</h3>
  </div>
  </div>

  <div>
    <ion-grid fixed>
     
      <ion-row>
       
        <ion-col size="auto">
         
          <div  class="description">
            <ion-label>
              <strong> Description</strong>
            </ion-label>
              <ion-icon name="chatbubble-outline" (click)="CommentsPage()" color="blue" id="chat"></ion-icon>
            <p>{{place.description}}</p>
          </div>
          <h3>Category {{place.category.name}}</h3>
        </ion-col>
        
      </ion-row>
    
  
      <div class="save-dish">
  
        <div class="dishes">
          <ion-grid fixed>
            <ion-row>
              <ion-col size="6">
                <ion-label color="black">Dishes</ion-label>
              </ion-col>
              <ion-col size="3">
                <ion-button size="medium" color="blue" fill="clear" class="add-more">
                  add more
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
  
        <ion-button  expand="block" fill="outline" size="medium" color="blue" (click)="setOpen(true)" id="add">
          Add dishes
        </ion-button>
      </div>
  
      <div class="wrapper">
  
        <div class="dishes">
          <ion-grid fixed>
            <ion-row>
              <ion-col size="6">
                <ion-label color="black">Dishes</ion-label>
              </ion-col>
              <ion-col size="3">
                <ion-button size="medium" color="blue" fill="clear" class="add-more"  (click)="setOpen(true)" id="add">
                  add more
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>

          <ion-card *ngFor="let item of dishes">
            <ion-img [src]="'data:image/jpeg;base64,'+ item.picture" ></ion-img>      
            <!--<ion-img [src]="'data:image/jpeg;bytes'+ details.dishpicture" *ngIf="details.dishpicture !== ''"></ion-img>-->
            <ion-card-title color="dark">{{item.name}}</ion-card-title>
            <ion-chip color="gray" mode="ios">
              <ion-icon name="bag-outline" color="dark" (click)="addtoCart()"></ion-icon>
            </ion-chip>
          </ion-card>
        
        <!--<ion-card>
          <img src="assets/images/mozzarella.jpg" alt="photo de mozzarella">
          <ion-card-title  color="dark">Poulet</ion-card-title>
          <ion-chip color="gray" mode="ios">
            <ion-icon name="bag-outline" color="dark" (click)="addtoCart()"></ion-icon>
          </ion-chip>
        </ion-card>
  
        <ion-card>
          <img src="assets/images/mozzarella.jpg" alt="photo de mozzarella">
          <ion-card-title color="dark">salade de fruit</ion-card-title>
          <ion-chip color="gray" mode="ios">
            <ion-icon name="bag-outline" color="dark" (click)="addtoCart()"></ion-icon>
          </ion-chip>
        </ion-card>
  
        <ion-card>
          <img src="assets/images/mozzarella.jpg" alt="photo de mozzarella">
          <ion-card-title color="dark">poisson frit</ion-card-title>
          <ion-chip color="gray" mode="ios">
            <ion-icon name="bag-outline" color="dark" (click)="addtoCart()"></ion-icon>
          </ion-chip>
        </ion-card>-->
       </div>
    </ion-grid>
  </div>
  
</ion-content>


  <!------------------Modal Add Dish --------------------------------->
  <ion-modal 
  [isOpen]="isModalOpen" 
  #modal
  trigger="add"
  >
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="end">
            <ion-button (click)="setOpen(false)" color="blue">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-grid fixed>
          <ion-row>
            <ion-col size="6">
              <ion-label class="modal-label">Add Dishes</ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-button size="medium" color="blue" fill="clear" class="add-more" (click)="addDish()">
                add more
              </ion-button>
             
            </ion-col>
          </ion-row>
        </ion-grid>
        
        <ion-grid fixed>
          <ion-row>
            <ion-col size="6">
              <ion-input required  aria-label="Medium input" type="text" placeholder="  Name"></ion-input>
            </ion-col>
            <ion-col size="3">
              <ion-input required aria-label="Medium input" type="number" placeholder="  Price"></ion-input>
            </ion-col>
            <ion-col size="3" *ngIf="image === ''">
              <ion-button size="large" fill="clear" (click)="presentActionSheet()" id="pic">
                <ion-icon slot="end" name="camera" color="blue"></ion-icon>
              </ion-button>
            </ion-col>
            <ion-col size="3">
              <ion-thumbnail *ngIf="image !== ''">
                <img [src]=" image"/>
              </ion-thumbnail>
            </ion-col>
          </ion-row>
        </ion-grid>
        <!--*************add components****************-->
        <ion-grid fixed>
          <ion-row>
            <ion-col size="6">
              <ion-label class="modal-label">Dish Components</ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-button size="medium" color="blue" fill="clear" class="add-more">
                add more
              </ion-button>
            </ion-col>  
          </ion-row>
        
          <ion-row>
            <ion-col size="12">
              <ion-label color="dark" style="font-size: small;">Enter a maximum of 3 components</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6">
              <ion-input required aria-label="Medium input"  type="text" placeholder="  Name"></ion-input>
            </ion-col>
            <ion-col size="3">
              <ion-input required type="number" aria-label="Medium input" placeholder="  Price" ></ion-input>
            </ion-col>
          </ion-row>
        </ion-grid>
        <div class="save-button">
          <ion-button  expand="block" color="blue">
            Save
           </ion-button>   
        </div>
             
        
      </ion-content>
    </ng-template>
  </ion-modal>
 